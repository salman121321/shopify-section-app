{% schema %}
{
  "name": "My Custom Section",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Hello from Shopify Section App"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#f4f4f4"
    }
  ],
  "presets": [
    {
      "name": "My Custom Section",
      "category": "Shopi Section"
    }
  ]
}
{% endschema %}

{% assign installed_sections = app.metafields.shopi_section.installed_sections.value %}
<div style="background: #000; color: #fff; padding: 5px; font-size: 10px;">Debug: {{ installed_sections | json }} (Looking for: my-custom-section)</div>

{% if installed_sections contains 'my-custom-section' %}

<div style="background-color: {{ section.settings.background_color }}; color: {{ section.settings.text_color }}; padding: 40px; text-align: center;">
  <h2 style="margin: 0; font-size: 24px;">{{ section.settings.heading }}</h2>
  <p style="margin-top: 10px;">This section is powered by your Shopify App!</p>
</div>

{% else %}
  <div style="padding: 20px; background: #fff3cd; color: #856404; border: 1px solid #ffeeba; text-align: center; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;">
    <div style="font-weight: bold; margin-bottom: 8px;">⚠️ Section Not Activated</div>
    <p style="margin: 0;">Please activate <strong>My Custom Section</strong> in the <strong>Shopi Section App</strong> to use this section on your store.</p>
  </div>
{% endif %}
